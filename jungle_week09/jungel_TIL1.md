## 9주차 pintos USER PROGRAMS 및 알고리즘 문제 풀이

- 2024 - 05 -20 (64일차)

#### 알고리즘 문제 풀이

- 1038번 [감소하는 수](https://github.com/dongyeoppp/Jungle_TIL/blob/main/jungle_week09/bk_1038.py)
- 2470번 [두 용액]()

#### pintos user programs 키워드

- User mode vs Kernel mode

  - 커널에서 중요한 자원을 관리하기 때문에, 사용자가 그 중요한 자원에 접근하지 못하도록 모드를 2가지로 나눈 것
  - user mode
    - 유저가 접근할 수 있는 영역을 제한적으로 두고, 프로그램의 자원에 함부로 침범하지 못하는 모드
    - 코드를 작성하고, 프로세스를 실행하는 등의 작업을 할 수 있다.
  - kernerl mode
    - 모든 자원에 접근, 명령을 할 수 있다.

- register vs memory
  - register
    - 레지스터는 중앙처리장치(cpu) 내부에 위치한 매우 빠른 데이터 저장소이다.
    - 소량의 데이터를 저장할 수 있으며, cpu가 직접 접근하여 사용하므로 속도가 매우 빠르다.
    - 주로 연산 중간 결과를 저장하거나 cpu가 직접 접근해야 하는 데이터를 일시적으로 저장하는데 사용된다.
  - memory
    - 메모리(RAM)는 cpu 외부에 위치하며 데이터를 저장하는 주요장치
    - 레지스터보다는 느리지만, 하드 디스크와 같은 보조 기억장치보다는 빠르다.
    - 레지스터보다 용량이 크며, 코드와 데이터를 저장하는데 사용된다.
- user stack

  - 컴퓨터 프로그램 실행 시 함수 호출과 관련된 정보를 저장하는 메모리 영역
  - user stack 주요 기능
    - 함수 호출 관리
      - 함수가 호출될 때마다 스택 프레임이 생성되어 호출된 함수의 리턴 주소와 지역 변수가 저장된다.
    - 리턴 주소 저장
      - 함수가 호출된 후 반환되어야 할 주소를 저장하여 함수 실행이 끝난 후 원래 호출한 위치로 돌아갈 수 있게 한다.
    - 지역 변수 저장
      - 함수 내에서 선언된 지역 변수들이 저장된다.
    - 매개 변수 전달
      - 함수 호출 시 전달된 매개 변수들이 저장된다.
  - 프로세스 관리
    - 각 프로세스는 독립적인 user stack을 가진다. 이는 프로세스의 독립성과 데이터 보호에 기여한다.
    - 운영체제는 프로세스 생성 시 사용자 스택을 할당하고, 프로세스 종료 시 해제한다.
  - context switching
    - 프로세스가 전환될 때, 운영 체제는 현재 프로세스의 스택 상태를 저장하고, 다음 프로세스의 스택 상태를 복원한다.
    - 이를 통해 각 프로세스는 이전 상태를 그대로 유지할 수 있다.
  - stack overflow
    - 프로그램이 할당된 스택 영역을 초과하여 데이터를 저장할 때 발생
    - 운영체제는 이러한 요류를 감지하고, 프로그램을 종료시키거나 예외 처리를 수행한다.

- system call
  - 운영체제가 제공하는 서비스를 응용프로그램이 사용할 수 있게 하는 인터페이스이다.
  - 사용자 프로그램이 하드웨어 지원에 직접 접근하는 것을 방지하고, 운영체제를 통해 안전하게 자원에 접근하도록 한다.
  - 동작 원리
    - 시스템 콜 요청
      - 사용자 프로그램이 시스템 콜 라이브러리 함수를 호출한다.
    - 모드 전환
      - 시스템 콜 라이브러리 함수는 소프트웨어 인터럽트를 발생시켜 사용자 모드에서 커널 모드로 전환한다.
    - 커널 처리
      - 커널은 시스템 콜 번호를 확인하고 해당 시스템 콜 핸들러를 호출한다.
    - 결과 반환
      - 시스템 콜 핸들러가 작업을 수행한 후 결과를 반환하고, 커널 모드에서 사용자 모드로 전환한다.
    - 프로그램 실행 재개
      - 사용자 프로그램이 반환된 결과를 받아서 계속 실행된다.
- file discriptor

  - 운영체제가 파일이나 입출력 장치와 같은 리소스를 추상화하여 관리하는데 사용하는 정수 값입니다.
    - 파일을 열면 해당 파일을 참조하는 파일 디스크립터(정수값)가 반환된다.
  - 프로세스가 파일을 열거나, 읽거나, 쓰는 등의 작업을 할 때 사용된다.
  - 표준 파일 디스크립터
    - 표준 입력 (standard input, stdin) : 파일 디스크립터 0
    - 표준 출력 (standard output, stdout) : 파일 디스크립터 1
    - 표준 오류 (standard error, stderr) : 파일 디스크립터 2
  - 파일 디스크립터의 용도
    - 파일 조작
      - 파일을 열고, 읽고, 쓰고, 닫는 작업에 사용된다.
    - 입출력 관리
      - 파일 뿐만 아니라 네트워크 소켓, 파이프, 터미널 등 다양한 입출력 장치를 관리한다.
    - 자원 추적
      - 운영체제가 프로세스가 사용하는 자원을 추적하고 관리하는데 도움이 된다.
  - 파일 디스크립터 관리
    - 운영체제는 각 프로세스에 대해 파일 디스크립터 테이블을 유지한다.
    - 파일 디스크립터는 프로세스 별로 독립적이므로, 서로 다른 프로세스는 같은 파일에 대해 다른 파일 디스크립터를 가질 수 있다.
    - 파일 디스크립터는 시스템 자원이므로 사용이 끝나면 반드시 닫아야 한다. 그렇지 않으면 리소스 누수가 발생하여 시스템에 영향을 줄 수 있다.

- cache

  - 컴퓨터 시스템에서 데이터 접근 속도를 높이기 위해 사용되는 고속 메모리 계층이다.
  - 캐시는 자주 사용되거나 최근에 사용된 데이터를 저장하여, 메인 메모리나 저장 장치보다 훨씬 빠르게 접근할 수 있게 해준다.
  - 캐시는 일반적으로 메인 메모리보다 빠르지만 용량이 작다.
  - cpu 내부나 cpu와 메인 메모리 사이에 위치하며, 여러 계층으로 나뉘고 각 계층은 크기와 속도에 따라 다르다.
  - cache hit
    - 요청된 데이터가 캐시에 존재하는 경우, 캐시에서 데이터를 바로 가져와서 빠르게 처리할 수 있다.
  - cache miss
    - 요청된 데이터가 캐시에 없는 경우, 메인 메모리나 더 느린 저장 장치에서 데이터를 가져와야 하므로 지연 시간이 발생한다.

- Atomic operation (원자적 연산)

  - 컴퓨터 시스템에서 더 이상 나눌 수 없는 단일 작업 단위
  - 한 번 시작되면 중간에 다른 연산으로 인해 방해받지 않고 완전히 수행되거나 전혀 수행되지 않는 특성을 갖는다.
  - 주로 멀티스레드 환경에서 동기화 문제를 해결하기 위해 사용된다.
  - 연산이 시작되면 그 연산은 완료될 때까지 중단되지 않는다.
  - 다른 스레드나 프로세스가 연산 중인 데이터를 읽거나 쓰지 못하게 하여 데이터의 일관성을 유지한다.
  - 원자적 연산은 동기화 문제를 방지하여 데이터의 일관성과 무결성을 보장할 수 있다.

- rax register

  - x86-64 아키텍처에서 사용되는 64비트 범용 레지스터 중 하나로, 주로 연산 결과를 저장하거나 함수 호출에서 반환 값을 전달하는데 사용된다.
  - 다양한 목적에 사용될 수 있는 범용 레지스터로 산술 연산, 논리 연산, 데이터 이동 등에 활용된다.

- 32 bit OS vs 64 bit OS
  - 32 bit 운영체제
    - 32 bit 메모리 주소를 사용하여 최대 약 4GB의 메모리를 직접 주소 지정할 수 있다.
    - 32 bit 응용프로그램과 드라이버를 실행할 수 있지만, 64 bit 하드웨어와의 호환성은 제한적이다.
    - 하나의 프로세스가 사용할 수 있는 최대 메모리 양이 제한된다. 대구모 메모리를 요규하는 작업에 제한이 있을 수 있다.
  - 64 bit 운영체제
    - 64 bit 메모리 주소를 사용하여 매우 큰 메모리 주소 공간을 직접 주소 지정할 수 있다.
    - 64 bit 응용 프로그램과 드라이버를 실행할 수 있으며, 32 bit 응용 프로그램을 호환성 모드에서 실행할 수 있다. -> 32 bit 운영체제와 달리 더 많은 응용프로그램을 실행 할 수 있음을 의미
    - 많은 양의 메모리를 사용할 수 있기 때문에 대규모 데이터베이스 작업에 적합
- interrupt

  - 컴퓨터 시스템에서 발생하는 외부 이벤트
  - 프로세서의 정상적인 실행을 일시적으로 멈추고 해당 이벤트에 대한 처리를 수행하는 메커니즘
  - 인터럽트는 하드웨어나 소프트웨어로부터 발생할 수 있으며, 다양한 운영체제 및 컴퓨터 아키텍처에서 사용된다.
  - 하드웨어 인터럽트
    - 타이머 인터럽트, 키보드 인터럽트, 디스크 i/o 완료 인터럽트 등
  - 소프트웨어 인터럽트
    - 프로세서가 프로그램 실행 중 오류나 예외 상황을 감지 했을 때 발생 (예외 인터럽트)
  - 시스템 콜 인터럽트
    - 사용자 프로그램이 운영체제의 서비스를 요청할 때 발생
    - 사용자 모드에서 커널 모드로 전환되어 시스템 콜을 처리한다.

- segmentation fault
  - 프로그램이 메모리에 잘못된 영역에 접근하여 발생하는 오류
  - 원인
    - 포인터 연산 오류
      - 포인터를 잘못된 주소로 역참조하거나, 할당되지 않은 메모리에 접근하는 경우 발생
    - 배열 인덱스 오류
      - 배열의 범위를 초과하여 인덱스에 접근하는 경우에 발생
    - 스택 오버플로우
      - 재귀 함수 호출이 너무 깊거나, 많은 데이터를 스택에 저장하는 경우 발생
    - 힙 오버플로우
      - 동적을 할당된 메모리 범위를 초과하여 데이터를 저장하는 경우 발생
    - 함수 호출 규약 위반
      - 함수 호출 시 인자를 잘못 전달하는 경우 발생
